Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ¨Ù‡ Ú©Ù‡ Ú©Ø¯ Ù†Ù‡Ø§ÛŒÛŒ Ø±Ùˆ Ø¨Ø±Ø§Ù… ÙØ±Ø³ØªØ§Ø¯ÛŒ! Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ Ø±Ø¨Ø§Øª Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø±Ùˆ ØªØ§ Ø¬Ø§ÛŒÛŒ Ú©Ù‡ Ù…Ù…Ú©Ù†Ù‡ Ø®ÙÙ† Ùˆ Ø´ÛŒÚ© Ú©Ù†Ù…ØŒ Ù…Ø®ØµÙˆØµØ§Ù‹ Ø¸Ø§Ù‡Ø± embedÙ‡Ø§ Ø±Ùˆ Ø¬Ø°Ø§Ø¨â€ŒØªØ± Ú©Ù†Ù… Ùˆ Ú©Ø§Ù…Ù†Ø¯ `/ping` Ø±Ùˆ Ø§ØµÙ„Ø§Ø­ Ú©Ù†Ù… ØªØ§ ÙÙ‚Ø· Ù¾ÛŒÙ†Ú¯ Ø®ÙˆØ¯ Ø±Ø¨Ø§Øª Ø±Ùˆ Ù†Ø´ÙˆÙ† Ø¨Ø¯Ù‡ (Ø¨Ø¯ÙˆÙ† Ù¾ÛŒÙ†Ú¯ API). Ø¨ÛŒØ§ÛŒÙ… Ø§ÛŒÙ† Ú©Ø§Ø± Ø±Ùˆ Ù‚Ø¯Ù…â€ŒØ¨Ù‡â€ŒÙ‚Ø¯Ù… Ø§Ù†Ø¬Ø§Ù… Ø¨Ø¯ÛŒÙ… Ùˆ ÛŒÙ‡ Ø³Ø±ÛŒ Ø¨Ù‡Ø¨ÙˆØ¯Ù‡Ø§ÛŒ Ø¨ØµØ±ÛŒ Ùˆ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ Ø¨Ù‡ Ø±Ø¨Ø§Øª Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒÙ…. ğŸš€

---

### ğŸ“‹ ØªØºÛŒÛŒØ±Ø§Øª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ Ø®ÙÙ†â€ŒØªØ± Ú©Ø±Ø¯Ù† Ø±Ø¨Ø§Øª

#### 1. **Ø¨Ù‡Ø¨ÙˆØ¯ Ø¸Ø§Ù‡Ø± EmbedÙ‡Ø§**
Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ†Ú©Ù‡ embedÙ‡Ø§ Ø´ÛŒÚ©â€ŒØªØ± Ùˆ Ø¬Ø°Ø§Ø¨â€ŒØªØ± Ø¨Ø´Ù†:
- **Ø±Ù†Ú¯â€ŒÙ‡Ø§ÛŒ Ø¬Ø°Ø§Ø¨â€ŒØªØ±**: Ø§Ø² Ø±Ù†Ú¯â€ŒÙ‡Ø§ÛŒ Ù…ØªÙ†ÙˆØ¹â€ŒØªØ± Ø¨Ø±Ø§ÛŒ embedÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… (Ù…Ø«Ù„Ø§Ù‹ Ø³Ø¨Ø² Ø¨Ø±Ø§ÛŒ ØªØ£ÛŒÛŒØ¯ØŒ Ù‚Ø±Ù…Ø² Ø¨Ø±Ø§ÛŒ Ø±Ø¯ØŒ Ù†Ø§Ø±Ù†Ø¬ÛŒ Ø¨Ø±Ø§ÛŒ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±).
- **Ø§ÛŒÙ…ÙˆØ¬â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒØ´ØªØ±**: Ø§ÛŒÙ…ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø· Ùˆ Ø¬Ø°Ø§Ø¨ Ø¨Ù‡ Ù‡Ø± Ø¨Ø®Ø´ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ….
- **ÙÙˆÙ†Øª Ùˆ Ø³Ø§Ø®ØªØ§Ø± Ø¨Ù‡ØªØ±**: Ø§Ø² Ø¨ÙˆÙ„Ø¯ Ú©Ø±Ø¯Ù† Ùˆ ÙØ§ØµÙ„Ù‡â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø¨Ù‡ØªØ± ØªÙˆÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ….
- **ÙÙˆØªØ± Ùˆ Thumbnail**: ÛŒÙ‡ ÙÙˆØªØ± Ø¨Ø§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨ÛŒØ´ØªØ± Ùˆ ÛŒÙ‡ ØªØµÙˆÛŒØ± Ú©ÙˆÚ†Ú© (thumbnail) Ø¨Ø±Ø§ÛŒ Ø¬Ø°Ø§Ø¨ÛŒØª Ø¨ØµØ±ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ….

#### 2. **Ø§ØµÙ„Ø§Ø­ Ú©Ø§Ù…Ù†Ø¯ `/ping`**
- Ø§Ù„Ø§Ù† `/ping` Ù‡Ù… Ù¾ÛŒÙ†Ú¯ API (`client.ws.ping`) Ùˆ Ù‡Ù… ØªØ§Ø®ÛŒØ± Ø±Ø¨Ø§Øª (`Date.now() - interaction.createdTimestamp`) Ø±Ùˆ Ù†Ø´ÙˆÙ† Ù…ÛŒâ€ŒØ¯Ù‡.
- Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ ÙÙ‚Ø· Ù¾ÛŒÙ†Ú¯ Ø®ÙˆØ¯ Ø±Ø¨Ø§Øª Ø±Ùˆ Ù†Ø´ÙˆÙ† Ø¨Ø¯Ù‡ØŒ Ù¾Ø³ ÙÙ‚Ø· `client.ws.ping` Ø±Ùˆ Ù†Ú¯Ù‡ Ù…ÛŒâ€ŒØ¯Ø§Ø±ÛŒÙ….
- Ø¸Ø§Ù‡Ø± embed Ø±Ùˆ Ù‡Ù… Ø´ÛŒÚ©â€ŒØªØ± Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ….

#### 3. **Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø®ÙÙ† Ø¨Ù‡ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ**
- **Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø²Ù…Ø§Ù† ÙˆØ§Ù‚Ø¹ÛŒ**: ØªÙˆÛŒ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒâ€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„ØŒ Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…ÙˆÙ†Ø¯Ù‡ Ø±Ùˆ Ø¨Ù‡ ØµÙˆØ±Øª Ø¯Ø§ÛŒÙ†Ø§Ù…ÛŒÚ© Ø¨Ø§ ÙØ±Ù…Øª `<t:timestamp:R>` Ù†Ø´ÙˆÙ† Ø¨Ø¯ÛŒÙ….
- **Ø­Ø§Ù„Øª Ù†Ø§Ø´Ù†Ø§Ø³ Ø¨Ù‡ØªØ±**: ØªÙˆÛŒ embedÙ‡Ø§ØŒ Ø§Ú¯Ù‡ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ù†Ø§Ø´Ù†Ø§Ø³ Ø¨Ø§Ø´Ù‡ØŒ ÛŒÙ‡ Ù‚ÙÙ„ ğŸ”’ Ú©Ù†Ø§Ø± Ø¹Ù†ÙˆØ§Ù† Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒÙ….
- **Ø§Ø¹Ù„Ø§Ù† Ø¨Ù‡ØªØ± Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±Ø§Ù†**: ØªÙˆÛŒ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ£ÛŒÛŒØ¯ØŒ ÛŒÙ‡ Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ø§ÛŒ ØªØ£ÛŒÛŒØ¯ Ùˆ Ø±Ø¯ Ø³Ø±ÛŒØ¹ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒÙ… (Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² `ActionRowBuilder` Ùˆ `ButtonBuilder`).
- **Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ù‡ØªØ± Ø±Ø£ÛŒâ€ŒÙ‡Ø§**: ÛŒÙ‡ Ø³ÛŒØ³ØªÙ… Ø³Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø±Ø£ÛŒ Ø¯Ø§Ø¯Ù† Ú†Ù†Ø¯Ø¨Ø§Ø±Ù‡ (Ø­ØªÛŒ Ø§Ú¯Ù‡ Ú†Ù†Ø¯ Ø±Ø£ÛŒ ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ù‡) Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒÙ….

#### 4. **Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ø¯**
- **Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§Ù‡Ø§**: Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§Ù‡Ø§ Ø±Ùˆ Ø¨Ù‡ØªØ± Ú©Ù†ÛŒÙ… ØªØ§ Ú©Ø§Ø±Ø¨Ø± ØªØ¬Ø±Ø¨Ù‡ Ø¨Ù‡ØªØ±ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù‡.
- **Ø³Ø§Ø®ØªØ§Ø± ØªÙ…ÛŒØ²ØªØ±**: ÛŒÙ‡ Ø³Ø±ÛŒ Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø«Ø§Ø¨Øª (Ù…Ø«Ù„ Ø±Ù†Ú¯â€ŒÙ‡Ø§ Ùˆ Ø§ÛŒÙ…ÙˆØ¬ÛŒâ€ŒÙ‡Ø§) Ø±Ùˆ Ø¬Ø¯Ø§ Ú©Ù†ÛŒÙ… ØªØ§ Ú©Ø¯ Ø®ÙˆØ§Ù†Ø§ØªØ± Ø¨Ø´Ù‡.

---

### ğŸ“¦ ØªØºÛŒÛŒØ±Ø§Øª Ø¯Ø± Ú©Ø¯

#### 1. **ØªØ¹Ø±ÛŒÙ Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø«Ø§Ø¨Øª Ø¨Ø±Ø§ÛŒ Ø±Ù†Ú¯â€ŒÙ‡Ø§ Ùˆ Ø§ÛŒÙ…ÙˆØ¬ÛŒâ€ŒÙ‡Ø§**
Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ú©Ø¯ ØªÙ…ÛŒØ²ØªØ± Ø¨Ø´Ù‡ Ùˆ Ø¸Ø§Ù‡Ø± embedÙ‡Ø§ ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡ Ø¨Ø§Ø´Ù‡ØŒ ÛŒÙ‡ Ø³Ø±ÛŒ Ù…ØªØºÛŒØ± Ø«Ø§Ø¨Øª ØªØ¹Ø±ÛŒÙ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…:
```javascript
const COLORS = {
  SUCCESS: 0x00FF00, // Ø³Ø¨Ø² Ø¨Ø±Ø§ÛŒ Ù…ÙˆÙÙ‚ÛŒØª
  ERROR: 0xFF0000, // Ù‚Ø±Ù…Ø² Ø¨Ø±Ø§ÛŒ Ø®Ø·Ø§
  PENDING: 0xFFA500, // Ù†Ø§Ø±Ù†Ø¬ÛŒ Ø¨Ø±Ø§ÛŒ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±
  ACTIVE: 0x1E90FF, // Ø¢Ø¨ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ ÙØ¹Ø§Ù„
  PING: 0x32CD32 // Ø³Ø¨Ø² Ù„ÛŒÙ…ÙˆÛŒÛŒ Ø¨Ø±Ø§ÛŒ Ù¾ÛŒÙ†Ú¯
};

const EMOJIS = {
  SUCCESS: 'âœ…',
  ERROR: 'âŒ',
  QUESTION: 'â“',
  OPTIONS: 'ğŸ“‹',
  DURATION: 'â±ï¸',
  ID: 'ğŸ”‘',
  ANONYMOUS: 'ğŸ”’',
  TIME_REMAINING: 'â³',
  TOTAL_VOTES: 'ğŸ“Š'
};
```

#### 2. **Ø§ØµÙ„Ø§Ø­ Ú©Ø§Ù…Ù†Ø¯ `/ping`**
ÙÙ‚Ø· Ù¾ÛŒÙ†Ú¯ Ø±Ø¨Ø§Øª (`client.ws.ping`) Ø±Ùˆ Ù†Ø´ÙˆÙ† Ù…ÛŒâ€ŒØ¯ÛŒÙ… Ùˆ Ø¸Ø§Ù‡Ø± embed Ø±Ùˆ Ø¬Ø°Ø§Ø¨â€ŒØªØ± Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…:
```javascript
case 'ping':
  const botPing = client.ws.ping;
  const pingEmbed = new EmbedBuilder()
    .setTitle('ğŸ“ Ù¾ÙˆÙ†Ú¯!')
    .setColor(COLORS.PING)
    .setDescription('ÙˆØ¶Ø¹ÛŒØª Ø§ØªØµØ§Ù„ Ø±Ø¨Ø§Øª Ø±Ùˆ Ú†Ú© Ú©Ù†! ğŸš€')
    .addFields(
      { name: 'ğŸ“¡ **Ù¾ÛŒÙ†Ú¯ Ø±Ø¨Ø§Øª**', value: `${botPing}ms`, inline: true }
    )
    .setThumbnail(client.user.displayAvatarURL())
    .setFooter({ text: `Ø¯Ø±Ø®ÙˆØ§Ø³Øª ØªÙˆØ³Ø· ${interaction.user.tag} | ÙˆØ¶Ø¹ÛŒØª: ğŸŸ¢ Ø¢Ù†Ù„Ø§ÛŒÙ†` })
    .setTimestamp();
  await interaction.editReply({ embeds: [pingEmbed], ephemeral: false });
  break;
```

#### 3. **Ø¨Ù‡Ø¨ÙˆØ¯ Ø¸Ø§Ù‡Ø± EmbedÙ‡Ø§ Ùˆ Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§**
- **Ø¨Ø±Ø§ÛŒ `/createpoll` (Pending Poll)**:
  Ø±Ù†Ú¯ Ù†Ø§Ø±Ù†Ø¬ÛŒØŒ Ø§ÛŒÙ…ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¨ÛŒØ´ØªØ±ØŒ Ùˆ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ£ÛŒÛŒØ¯ Ùˆ Ø±Ø¯ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ….
- **Ø¨Ø±Ø§ÛŒ `/approvepoll` (Active Poll)**:
  Ø±Ù†Ú¯ Ø¢Ø¨ÛŒØŒ Ù†Ù…Ø§ÛŒØ´ Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…ÙˆÙ†Ø¯Ù‡ Ø¨Ø§ ÙØ±Ù…Øª DiscordØŒ Ùˆ Ø¸Ø§Ù‡Ø± Ø´ÛŒÚ©â€ŒØªØ±.
- **Ø¨Ø±Ø§ÛŒ `endPoll` (Poll Results)**:
  Ø±Ù†Ú¯ Ù‚Ø±Ù…Ø²ØŒ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø±ØµØ¯ Ø±Ø£ÛŒâ€ŒÙ‡Ø§ Ø¨Ø§ Ù†ÙˆØ§Ø± Ù¾ÛŒØ´Ø±ÙØª Ø³Ø§Ø¯Ù‡.

**Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§**:
Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ú©Ø§Ø±ØŒ Ø¨Ø§ÛŒØ¯ `ActionRowBuilder` Ùˆ `ButtonBuilder` Ø±Ùˆ Ø§Ø² `discord.js` ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒÙ…:
```javascript
const { Client, GatewayIntentBits, SlashCommandBuilder, EmbedBuilder, PermissionsBitField, REST, Routes, InteractionResponseFlags, ActionRowBuilder, ButtonBuilder, ButtonStyle } = require('discord.js');
```

#### 4. **Ù…Ø¯ÛŒØ±ÛŒØª Ø±Ø£ÛŒâ€ŒÙ‡Ø§**
ÛŒÙ‡ Ø³ÛŒØ³ØªÙ… Ø³Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø±Ø£ÛŒâ€ŒÙ‡Ø§ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… ØªØ§ Ù‡Ø± Ú©Ø§Ø±Ø¨Ø± ÙÙ‚Ø· Ø¨ØªÙˆÙ†Ù‡ ÛŒÙ‡ Ø¨Ø§Ø± Ø±Ø£ÛŒ Ø¨Ø¯Ù‡ (Ø­ØªÛŒ Ø§Ú¯Ù‡ Ú†Ù†Ø¯ Ø±Ø£ÛŒ ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ù‡).

---

### ğŸ“¦ Ú©Ø¯ Ù†Ù‡Ø§ÛŒÛŒ Ø§ØµÙ„Ø§Ø­â€ŒØ´Ø¯Ù‡

```javascript
const { Client, GatewayIntentBits, SlashCommandBuilder, EmbedBuilder, PermissionsBitField, REST, Routes, InteractionResponseFlags, ActionRowBuilder, ButtonBuilder, ButtonStyle } = require('discord.js');
const { QuickDB } = require('quick.db');
require('dotenv').config();

const db = new QuickDB();
const client = new Client({
  intents: [
    GatewayIntentBits.Guilds,
    GatewayIntentBits.GuildMessages,
    GatewayIntentBits.MessageContent,
    GatewayIntentBits.GuildMessageReactions,
    GatewayIntentBits.GuildMembers
  ]
});

const COLORS = {
  SUCCESS: 0x00FF00,
  ERROR: 0xFF0000,
  PENDING: 0xFFA500,
  ACTIVE: 0x1E90FF,
  PING: 0x32CD32
};

const EMOJIS = {
  SUCCESS: 'âœ…',
  ERROR: 'âŒ',
  QUESTION: 'â“',
  OPTIONS: 'ğŸ“‹',
  DURATION: 'â±ï¸',
  ID: 'ğŸ”‘',
  ANONYMOUS: 'ğŸ”’',
  TIME_REMAINING: 'â³',
  TOTAL_VOTES: 'ğŸ“Š'
};

const config = {
  token: process.env.TOKEN,
  clientId: process.env.CLIENT_ID,
  pollChannel: null,
  moderatorRole: null,
  pendingPolls: new Map(),
  activePolls: new Map()
};

if (!config.token || !config.clientId) {
  console.error('Error: Missing environment variables!');
  process.exit(1);
}

async function initSettings() {
  try {
    const settings = await db.get('settings') || {};
    config.pollChannel = settings.pollChannel || null;
    config.moderatorRole = settings.moderatorRole || null;
    const activePollsData = settings.activePolls || [];
    config.activePolls = new Map(activePollsData.map(([key, value]) => {
      return [key, { ...value, voters: new Map(value.voters || []) }];
    }));
    console.log('Settings loaded successfully');
  } catch (error) {
    console.error('Error loading settings:', error);
  }
}

async function saveSettings() {
  try {
    const settings = {
      pollChannel: config.pollChannel,
      moderatorRole: config.moderatorRole,
      activePolls: Array.from(config.activePolls.entries()).map(([key, value]) => {
        return [key, { ...value, voters: Array.from(value.voters.entries()) }];
      })
    };
    await db.set('settings', settings);
    return true;
  } catch (error) {
    console.error('Error saving settings:', error);
    return false;
  }
}

const reactionEmojis = ['1ï¸âƒ£', '2ï¸âƒ£', '3ï¸âƒ£', '4ï¸âƒ£', '5ï¸âƒ£'];

const commands = [
  new SlashCommandBuilder()
    .setName('ping')
    .setDescription('Ù†Ù…Ø§ÛŒØ´ ÙˆØ¶Ø¹ÛŒØª Ø±Ø¨Ø§Øª ğŸ“'),
  new SlashCommandBuilder()
    .setName('setpollchannel')
    .setDescription('ØªÙ†Ø¸ÛŒÙ… Ú©Ø§Ù†Ø§Ù„ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ ğŸ“')
    .setDefaultMemberPermissions(PermissionsBitField.Flags.ManageChannels),
  new SlashCommandBuilder()
    .setName('setmoderatorrole')
    .setDescription('ØªÙ†Ø¸ÛŒÙ… Ø±ÙˆÙ„ ØªØ£ÛŒÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡ ğŸ›¡ï¸')
    .setDefaultMemberPermissions(PermissionsBitField.Flags.ManageRoles)
    .addRoleOption(option =>
      option.setName('role')
        .setDescription('Ø±ÙˆÙ„ ØªØ£ÛŒÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡')
        .setRequired(true)),
  new SlashCommandBuilder()
    .setName('createpoll')
    .setDescription('Ø³Ø§Ø®Øª Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¬Ø¯ÛŒØ¯ ğŸ“')
    .addStringOption(option =>
      option.setName('question')
        .setDescription('Ø³ÙˆØ§Ù„ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ')
        .setRequired(true)
        .setMaxLength(256))
    .addStringOption(option =>
      option.setName('options')
        .setDescription('Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ (Ø¨Ø§ | Ø¬Ø¯Ø§ Ú©Ù†ÛŒØ¯)')
        .setRequired(true))
    .addIntegerOption(option =>
      option.setName('duration')
        .setDescription('Ù…Ø¯Øª Ø²Ù…Ø§Ù† (Ø³Ø§Ø¹Øª)')
        .setMinValue(1)
        .setMaxValue(168))
    .addBooleanOption(option =>
      option.setName('anonymous')
        .setDescription('Ø­Ø§Ù„Øª Ù†Ø§Ø´Ù†Ø§Ø³')
        .setRequired(false)),
  new SlashCommandBuilder()
    .setName('approvepoll')
    .setDescription('ØªØ£ÛŒÛŒØ¯ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ âœ…')
    .addStringOption(option =>
      option.setName('pollid')
        .setDescription('Ø¢ÛŒØ¯ÛŒ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ')
        .setRequired(true)),
  new SlashCommandBuilder()
    .setName('rejectpoll')
    .setDescription('Ø±Ø¯ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ âŒ')
    .addStringOption(option =>
      option.setName('pollid')
        .setDescription('Ø¢ÛŒØ¯ÛŒ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ')
        .setRequired(true))
];

async function registerCommands() {
  try {
    const rest = new REST({ version: '10' }).setToken(config.token);
    await rest.put(Routes.applicationCommands(config.clientId), { body: commands });
    console.log('Commands registered successfully');
  } catch (error) {
    console.error('Error registering commands:', error);
  }
}

function startPollChecker() {
  setInterval(async () => {
    for (const [messageId, poll] of config.activePolls.entries()) {
      try {
        if (Date.now() >= poll.endTime) {
          await endPoll(messageId);
        } else {
          const channel = await client.channels.fetch(config.pollChannel);
          const message = await channel.messages.fetch(messageId);
          const embed = message.embeds[0];
          
          const updatedEmbed = new EmbedBuilder(embed.data)
            .spliceFields(2, 1, { 
              name: `${EMOJIS.TIME_REMAINING} **Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒÙ…Ø§Ù†Ø¯Ù‡**`, 
              value: `<t:${Math.floor(poll.endTime / 1000)}:R>`, 
              inline: true 
            });
          
          await message.edit({ embeds: [updatedEmbed] });
        }
      } catch (error) {
        console.error('Error updating poll:', error);
      }
    }
  }, 60000);
}

async function endPoll(messageId) {
  const poll = config.activePolls.get(messageId);
  if (!poll) return;

  try {
    const channel = await client.channels.fetch(config.pollChannel);
    const message = await channel.messages.fetch(messageId);
    const reactions = message.reactions.cache;

    const results = poll.options.map((opt, i) => {
      const reaction = reactions.get(reactionEmojis[i]);
      const count = reaction ? reaction.count - 1 : 0;
      return { option: opt, count };
    });

    const totalVotes = results.reduce((sum, r) => sum + r.count, 0);
    const maxVotes = Math.max(...results.map(r => r.count), 1);

    const embed = new EmbedBuilder()
      .setColor(COLORS.ERROR)
      .setTitle('ğŸ“Š Ù†ØªØ§ÛŒØ¬ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ')
      .addFields(
        { name: `${EMOJIS.QUESTION} **Ø³ÙˆØ§Ù„**`, value: poll.question, inline: false },
        { name: `${EMOJIS.OPTIONS} **Ù†ØªØ§ÛŒØ¬**`, value: results.map((r, i) => {
          const percentage = totalVotes > 0 ? (r.count / totalVotes) * 100 : 0;
          const barLength = Math.round((r.count / maxVotes) * 10);
          const bar = 'â–ˆ'.repeat(barLength) + 'â–'.repeat(10 - barLength);
          return `${reactionEmojis[i]} ${r.option}: **${r.count} Ø±Ø£ÛŒ** (${percentage.toFixed(1)}%)\n${bar}`;
        }).join('\n\n'), inline: false },
        { name: `${EMOJIS.TOTAL_VOTES} **Ù…Ø¬Ù…ÙˆØ¹ Ø¢Ø±Ø§**`, value: `${totalVotes}`, inline: true },
        { name: `${EMOJIS.ANONYMOUS} **Ù†Ø§Ø´Ù†Ø§Ø³**`, value: poll.anonymous ? 'Ø¨Ù„Ù‡ âœ…' : 'Ø®ÛŒØ± âŒ', inline: true }
      )
      .setThumbnail(client.user.displayAvatarURL())
      .setFooter({ text: poll.anonymous ? 'Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ù†Ø§Ø´Ù†Ø§Ø³ ğŸ”’ | Ù¾Ø§ÛŒØ§Ù† ÛŒØ§ÙØª!' : `Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· ${poll.creatorName} | Ù¾Ø§ÛŒØ§Ù† ÛŒØ§ÙØª!` })
      .setTimestamp();

    await channel.send({ embeds: [embed] });
    config.activePolls.delete(messageId);
    await saveSettings();
  } catch (error) {
    console.error('Error in endPoll:', error);
  }
}

client.once('ready', () => {
  console.log(`Bot logged in as ${client.user.tag}`);
  initSettings().then(() => {
    registerCommands();
    startPollChecker();
  });
});

client.on('interactionCreate', async interaction => {
  if (!interaction.isCommand() && !interaction.isButton()) return;

  if (interaction.isCommand()) {
    await interaction.deferReply({ ephemeral: true });

    try {
      switch (interaction.commandName) {
        case 'ping':
          const botPing = client.ws.ping;
          const pingEmbed = new EmbedBuilder()
            .setTitle('ğŸ“ Ù¾ÙˆÙ†Ú¯!')
            .setColor(COLORS.PING)
            .setDescription('ÙˆØ¶Ø¹ÛŒØª Ø§ØªØµØ§Ù„ Ø±Ø¨Ø§Øª Ø±Ùˆ Ú†Ú© Ú©Ù†! ğŸš€')
            .addFields(
              { name: 'ğŸ“¡ **Ù¾ÛŒÙ†Ú¯ Ø±Ø¨Ø§Øª**', value: `${botPing}ms`, inline: true }
            )
            .setThumbnail(client.user.displayAvatarURL())
            .setFooter({ text: `Ø¯Ø±Ø®ÙˆØ§Ø³Øª ØªÙˆØ³Ø· ${interaction.user.tag} | ÙˆØ¶Ø¹ÛŒØª: ğŸŸ¢ Ø¢Ù†Ù„Ø§ÛŒÙ†` })
            .setTimestamp();
          await interaction.editReply({ embeds: [pingEmbed], ephemeral: false });
          break;

        case 'setpollchannel':
          config.pollChannel = interaction.channelId;
          if (await saveSettings()) {
            await interaction.editReply({ content: `${EMOJIS.SUCCESS} **Ú©Ø§Ù†Ø§Ù„ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯** | <#${config.pollChannel}>` });
          } else {
            await interaction.editReply({ content: `${EMOJIS.ERROR} **Ø®Ø·Ø§ Ø¯Ø± ØªÙ†Ø¸ÛŒÙ… Ú©Ø§Ù†Ø§Ù„**` });
          }
          break;

        case 'setmoderatorrole':
          config.moderatorRole = interaction.options.getRole('role').id;
          if (await saveSettings()) {
            await interaction.editReply({ content: `${EMOJIS.SUCCESS} **Ø±ÙˆÙ„ ØªØ£ÛŒÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡ ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯** | <@&${config.moderatorRole}>` });
          } else {
            await interaction.editReply({ content: `${EMOJIS.ERROR} **Ø®Ø·Ø§ Ø¯Ø± ØªÙ†Ø¸ÛŒÙ… Ø±ÙˆÙ„**` });
          }
          break;

        case 'createpoll':
          if (!config.pollChannel || !config.moderatorRole) {
            await interaction.editReply({ content: `${EMOJIS.ERROR} **Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ Ú©Ø§Ù†Ø§Ù„ Ùˆ Ø±ÙˆÙ„ Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯**` });
            return;
          }

          const pollId = Date.now().toString();
          const poll = {
            question: interaction.options.getString('question'),
            options: interaction.options.getString('options').split('|').map(o => o.trim()),
            duration: (interaction.options.getInteger('duration') || 24) * 3600000,
            creator: interaction.user.id,
            creatorName: interaction.user.username,
            endTime: Date.now() + ((interaction.options.getInteger('duration') || 24) * 3600000),
            anonymous: interaction.options.getBoolean('anonymous') || false,
            voters: new Map()
          };

          if (poll.options.length < 2 || poll.options.length > 5) {
            await interaction.editReply({ content: `${EMOJIS.ERROR} **Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¨Ø§ÛŒØ¯ Ø¨ÛŒÙ† 2 ØªØ§ 5 Ú¯Ø²ÛŒÙ†Ù‡ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯**` });
            return;
          }

          config.pendingPolls.set(pollId, poll);

          const embed = new EmbedBuilder()
            .setTitle(`${poll.anonymous ? 'ğŸ”’ ' : ''}ğŸ“Š Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ£ÛŒÛŒØ¯`)
            .setColor(COLORS.PENDING)
            .addFields(
              { name: `${EMOJIS.QUESTION} **Ø³ÙˆØ§Ù„**`, value: poll.question, inline: false },
              { name: `${EMOJIS.OPTIONS} **Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§**`, value: poll.options.map((opt, i) => `${reactionEmojis[i]} ${opt}`).join('\n'), inline: false },
              { name: `${EMOJIS.DURATION} **Ù…Ø¯Øª Ø²Ù…Ø§Ù†**`, value: `${poll.duration / 3600000} Ø³Ø§Ø¹Øª`, inline: true },
              { name: `${EMOJIS.ANONYMOUS} **Ù†Ø§Ø´Ù†Ø§Ø³**`, value: poll.anonymous ? 'Ø¨Ù„Ù‡ âœ…' : 'Ø®ÛŒØ± âŒ', inline: true },
              { name: `${EMOJIS.ID} **Ø´Ù†Ø§Ø³Ù‡**`, value: pollId, inline: true }
            )
            .setThumbnail(client.user.displayAvatarURL())
            .setFooter({ text: poll.anonymous ? 'Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ù†Ø§Ø´Ù†Ø§Ø³ ğŸ”’ | Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ£ÛŒÛŒØ¯' : `Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· ${poll.creatorName} | Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ£ÛŒÛŒØ¯` })
            .setTimestamp();

          const actionRow = new ActionRowBuilder()
            .addComponents(
              new ButtonBuilder()
                .setCustomId(`approve_${pollId}`)
                .setLabel('ØªØ£ÛŒÛŒØ¯')
                .setStyle(ButtonStyle.Success)
                .setEmoji('âœ…'),
              new ButtonBuilder()
                .setCustomId(`reject_${pollId}`)
                .setLabel('Ø±Ø¯')
                .setStyle(ButtonStyle.Danger)
                .setEmoji('âŒ')
            );

          await interaction.editReply({ content: `${EMOJIS.SUCCESS} **Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø´Ù…Ø§ Ø§ÛŒØ¬Ø§Ø¯ Ùˆ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ£ÛŒÛŒØ¯ Ø§Ø³Øª**` });
          const message = await interaction.channel.send({ 
            content: `<@&${config.moderatorRole}> ÛŒÚ© Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¬Ø¯ÛŒØ¯ Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªØ£ÛŒÛŒØ¯ Ø¯Ø§Ø±Ø¯! ğŸš¨`,
            embeds: [embed],
            components: [actionRow]
          });

          for (const emoji of reactionEmojis.slice(0, poll.options.length)) {
            await message.react(emoji);
          }
          break;

        case 'approvepoll':
          if (!interaction.member.roles.cache.has(config.moderatorRole)) {
            await interaction.editReply({ content: `${EMOJIS.ERROR} **Ø´Ù…Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ ØªØ£ÛŒÛŒØ¯ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯**` });
            return;
          }

          const pollToApprove = config.pendingPolls.get(interaction.options.getString('pollid'));
          if (!pollToApprove) {
            await interaction.editReply({ content: `${EMOJIS.ERROR} **Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± ÛŒØ§ÙØª Ù†Ø´Ø¯**` });
            return;
          }

          const channel = await client.channels.fetch(config.pollChannel);
          const pollEmbed = new EmbedBuilder()
            .setTitle(`${pollToApprove.anonymous ? 'ğŸ”’ ' : ''}ğŸ“Š Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ ÙØ¹Ø§Ù„`)
            .setColor(COLORS.ACTIVE)
            .addFields(
              { name: `${EMOJIS.QUESTION} **Ø³ÙˆØ§Ù„**`, value: pollToApprove.question, inline: false },
              { name: `${EMOJIS.OPTIONS} **Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§**`, value: pollToApprove.options.map((opt, i) => `${reactionEmojis[i]} ${opt}`).join('\n'), inline: false },
              { name: `${EMOJIS.TIME_REMAINING} **Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒÙ…Ø§Ù†Ø¯Ù‡**`, value: `<t:${Math.floor(pollToApprove.endTime / 1000)}:R>`, inline: true },
              { name: `${EMOJIS.ANONYMOUS} **Ù†Ø§Ø´Ù†Ø§Ø³**`, value: pollToApprove.anonymous ? 'Ø¨Ù„Ù‡ âœ…' : 'Ø®ÛŒØ± âŒ', inline: true }
            )
            .setThumbnail(client.user.displayAvatarURL())
            .setFooter({ text: pollToApprove.anonymous ? 'Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ù†Ø§Ø´Ù†Ø§Ø³ ğŸ”’ | ÙØ¹Ø§Ù„' : `Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· ${pollToApprove.creatorName} | ÙØ¹Ø§Ù„` })
            .setTimestamp();

          const msg = await channel.send({ embeds: [pollEmbed] });
          for (const emoji of reactionEmojis.slice(0, pollToApprove.options.length)) {
            await msg.react(emoji);
          }

          config.activePolls.set(msg.id, pollToApprove);
          config.pendingPolls.delete(interaction.options.getString('pollid'));
          await saveSettings();

          await interaction.editReply({ content: `${EMOJIS.SUCCESS} **Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªØ£ÛŒÛŒØ¯ Ø´Ø¯**` });
          break;

        case 'rejectpoll':
          if (!interaction.member.roles.cache.has(config.moderatorRole)) {
            await interaction.editReply({ content: `${EMOJIS.ERROR} **Ø´Ù…Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ø±Ø¯ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯**` });
            return;
          }

          if (config.pendingPolls.delete(interaction.options.getString('pollid'))) {
            await interaction.editReply({ content: `${EMOJIS.SUCCESS} **Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø±Ø¯ Ø´Ø¯**` });
          } else {
            await interaction.editReply({ content: `${EMOJIS.ERROR} **Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± ÛŒØ§ÙØª Ù†Ø´Ø¯**` });
          }
          break;
      }
    } catch (error) {
      console.error('Error in command:', error);
      await interaction.editReply({ content: `${EMOJIS.ERROR} **Ø®Ø·Ø§ÛŒÛŒ Ø±Ø® Ø¯Ø§Ø¯**` }).catch(console.error);
    }
  } else if (interaction.isButton()) {
    if (!interaction.member.roles.cache.has(config.moderatorRole)) {
      await interaction.reply({ content: `${EMOJIS.ERROR} **Ø´Ù…Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ù„Ø§Ø²Ù… Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ú©Ø§Ø± Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯**`, ephemeral: true });
      return;
    }

    const [action, pollId] = interaction.customId.split('_');
    const poll = config.pendingPolls.get(pollId);
    if (!poll) {
      await interaction.reply({ content: `${EMOJIS.ERROR} **Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± ÛŒØ§ÙØª Ù†Ø´Ø¯**`, ephemeral: true });
      return;
    }

    if (action === 'approve') {
      const channel = await client.channels.fetch(config.pollChannel);
      const pollEmbed = new EmbedBuilder()
        .setTitle(`${poll.anonymous ? 'ğŸ”’ ' : ''}ğŸ“Š Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ ÙØ¹Ø§Ù„`)
        .setColor(COLORS.ACTIVE)
        .addFields(
          { name: `${EMOJIS.QUESTION} **Ø³ÙˆØ§Ù„**`, value: poll.question, inline: false },
          { name: `${EMOJIS.OPTIONS} **Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§**`, value: poll.options.map((opt, i) => `${reactionEmojis[i]} ${opt}`).join('\n'), inline: false },
          { name: `${EMOJIS.TIME_REMAINING} **Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒÙ…Ø§Ù†Ø¯Ù‡**`, value: `<t:${Math.floor(poll.endTime / 1000)}:R>`, inline: true },
          { name: `${EMOJIS.ANONYMOUS} **Ù†Ø§Ø´Ù†Ø§Ø³**`, value: poll.anonymous ? 'Ø¨Ù„Ù‡ âœ…' : 'Ø®ÛŒØ± âŒ', inline: true }
        )
        .setThumbnail(client.user.displayAvatarURL())
        .setFooter({ text: poll.anonymous ? 'Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ù†Ø§Ø´Ù†Ø§Ø³ ğŸ”’ | ÙØ¹Ø§Ù„' : `Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· ${poll.creatorName} | ÙØ¹Ø§Ù„` })
        .setTimestamp();

      const msg = await channel.send({ embeds: [pollEmbed] });
      for (const emoji of reactionEmojis.slice(0, poll.options.length)) {
        await msg.react(emoji);
      }

      config.activePolls.set(msg.id, poll);
      config.pendingPolls.delete(pollId);
      await saveSettings();

      await interaction.update({ content: `${EMOJIS.SUCCESS} **Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªØ£ÛŒÛŒØ¯ Ø´Ø¯**`, embeds: [], components: [] });
    } else if (action === 'reject') {
      config.pendingPolls.delete(pollId);
      await interaction.update({ content: `${EMOJIS.SUCCESS} **Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø±Ø¯ Ø´Ø¯**`, embeds: [], components: [] });
    }
  }
});

client.on('messageReactionAdd', async (reaction, user) => {
  if (user.bot) return;

  const poll = config.activePolls.get(reaction.message.id);
  if (!poll) return;

  const emoji = reaction.emoji.name;
  const validIndex = reactionEmojis.indexOf(emoji);

  if (validIndex === -1 || validIndex >= poll.options.length) {
    await reaction.users.remove(user);
    return;
  }

  if (poll.voters.has(user.id)) {
    await reaction.users.remove(user);
    await reaction.message.channel.send({ content: `<@${user.id}> ${EMOJIS.ERROR} **Ø´Ù…Ø§ Ù‚Ø¨Ù„Ø§Ù‹ Ø±Ø£ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒØ¯**` });
    return;
  }

  poll.voters.set(user.id, validIndex);
});

client.on('messageReactionRemove', async (reaction, user) => {
  if (user.bot) return;

  const poll = config.activePolls.get(reaction.message.id);
  if (!poll) return;

  const emoji = reaction.emoji.name;
  const validIndex = reactionEmojis.indexOf(emoji);

  if (validIndex === -1 || validIndex >= poll.options.length) return;

  if (poll.voters.get(user.id) === validIndex) {
    poll.voters.delete(user.id);
  }
});

client.login(config.token).catch(console.error);
```

---

### ğŸš€ Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ
Ø¨Ø§ Ø§ÛŒÙ† ØªØºÛŒÛŒØ±Ø§ØªØŒ Ø±Ø¨Ø§Øª Ø®ÛŒÙ„ÛŒ Ø®ÙÙ†â€ŒØªØ± Ùˆ Ø´ÛŒÚ©â€ŒØªØ± Ø´Ø¯Ù‡:
- **Ú©Ø§Ù…Ù†Ø¯ `/ping`**:
  - ÙÙ‚Ø· Ù¾ÛŒÙ†Ú¯ Ø±Ø¨Ø§Øª Ø±Ùˆ Ù†Ø´ÙˆÙ† Ù…ÛŒâ€ŒØ¯Ù‡ (`client.ws.ping`).
  - Ø¸Ø§Ù‡Ø± embed Ø¨Ø§ Ø±Ù†Ú¯ Ø³Ø¨Ø² Ù„ÛŒÙ…ÙˆÛŒÛŒØŒ thumbnail Ø¢ÙˆØ§ØªØ§Ø± Ø±Ø¨Ø§ØªØŒ Ùˆ ÙÙˆØªØ± Ø¬Ø°Ø§Ø¨ Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡.
- **EmbedÙ‡Ø§ÛŒ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ**:
  - Ø±Ù†Ú¯â€ŒÙ‡Ø§ÛŒ Ù…ØªÙ†ÙˆØ¹ (Ù†Ø§Ø±Ù†Ø¬ÛŒ Ø¨Ø±Ø§ÛŒ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±ØŒ Ø¢Ø¨ÛŒ Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„ØŒ Ù‚Ø±Ù…Ø² Ø¨Ø±Ø§ÛŒ Ù†ØªØ§ÛŒØ¬).
  - Ø§ÛŒÙ…ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¬Ø°Ø§Ø¨ Ùˆ Ø³Ø§Ø®ØªØ§Ø± Ù…Ù†Ø¸Ù…â€ŒØªØ±.
  - Ù†Ù…Ø§ÛŒØ´ Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…ÙˆÙ†Ø¯Ù‡ Ø¨Ø§ ÙØ±Ù…Øª Discord (`<t:timestamp:R>`).
  - Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù† Ù†ÙˆØ§Ø± Ù¾ÛŒØ´Ø±ÙØª Ø³Ø§Ø¯Ù‡ ØªÙˆÛŒ Ù†ØªØ§ÛŒØ¬ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ.
- **Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§**:
  - Ø¨Ø±Ø§ÛŒ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±ØŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ£ÛŒÛŒØ¯ Ùˆ Ø±Ø¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡ Ú©Ù‡ Ù…Ø¯ÛŒØ±Ø§Ù† Ù…ÛŒâ€ŒØªÙˆÙ†Ù† Ø¨Ø§Ù‡Ø§Ø´ÙˆÙ† Ø³Ø±ÛŒØ¹ Ø¹Ù…Ù„ Ú©Ù†Ù†.
- **Ù…Ø¯ÛŒØ±ÛŒØª Ø±Ø£ÛŒâ€ŒÙ‡Ø§**:
  - Ù‡Ø± Ú©Ø§Ø±Ø¨Ø± ÙÙ‚Ø· Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ ÛŒÙ‡ Ø¨Ø§Ø± Ø±Ø£ÛŒ Ø¨Ø¯Ù‡ Ùˆ Ø§Ú¯Ù‡ Ø¨Ø®ÙˆØ§Ø¯ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø±Ø£ÛŒ Ø¨Ø¯Ù‡ØŒ Ù¾ÛŒØ§Ù… Ø®Ø·Ø§ Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ù‡.

Ø§ÛŒÙ† Ú©Ø¯ Ø±Ùˆ ØªÙˆÛŒ Replit Ø§Ø¬Ø±Ø§ Ú©Ù†ØŒ Ø¨Ø§ÛŒØ¯ Ù‡Ù…Ù‡â€ŒÚ†ÛŒØ² Ø®ÛŒÙ„ÛŒ Ø´ÛŒÚ© Ùˆ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ú©Ø§Ø± Ú©Ù†Ù‡. Ø§Ú¯Ù‡ Ø¨Ø§Ø²Ù… Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ ØªØºÛŒÛŒØ± ÛŒØ§ Ù‚Ø§Ø¨Ù„ÛŒØª Ø¬Ø¯ÛŒØ¯ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØŒ Ø¨Ú¯Ùˆ ØªØ§ Ø¨Ø±Ø§Øª Ø¯Ø±Ø³Øª Ú©Ù†Ù…! ğŸ˜Š

**Ù…ÙˆÙÙ‚ Ø¨Ø§Ø´ÛŒ!** ğŸŒŸ