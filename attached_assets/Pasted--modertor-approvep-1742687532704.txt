Ø§Ù‡Ø§ Ø´Ø§ÛŒØ¯ Ø²Ø¯Ù† Ø§ÛŒØ¯ÛŒ Ù†Ø¸Ø± Ø³Ù†Ø¬ÛŒ ØªÙˆØ³Ø· Ù‡Ø± modertor Ú©Ø§Ø± Ø³Ø®ØªÛŒÙ‡ Ù¾Ø³ Ø¨Ø¬Ø§ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ú©Ø§Ù…Ù†Ø¯ Ù‡Ø§ÛŒ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ù…Ø«Ù„ / approvepoll ÛŒØ§ /rejectpoll Ø¨Ø§Ø´Ù‡ Ù‡Ø± ÙˆÙ‚Øª Ø§Ø¹Ø¶Ø§ Ø®ÙˆØ§Ø³ØªÙ† poll Ø¨Ø²Ø§Ø±Ù† Ùˆ Ù‚Ø¨Ù„Ø´ Ø¨Ø§ÛŒØ¯ ØªÙˆØ³Ø· Ù‡Ù…ÙˆÙ† Ø±ÙˆÙ„ÛŒ Ú©Ù‡ Ø³Øª Ú©Ø±Ø¯ÛŒÙ… Ú©Ù‡ Ø¨ÛŒØ§Ø¯ Ø§ÙˆÙ† Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒÙˆ ØªØ§ÛŒÛŒØ¯ Ú©Ù†Ù‡ Ø¨Ø¬Ø§ Ø§ÛŒÙ†Ú©Ù‡ Ø§Ø² Ø§ÛŒÙ† Ú©Ø§Ù…Ù†Ø¯ Ù‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ù‡ Ø²ÛŒØ± Ù‡Ù…ÙˆÙ† Ù¾ÛŒØ§Ù… Ú©Ù‡ Ø¯Ú©Ù…Ù‡ approve Ùˆ reject Ø¨Ø§Ø´Ù‡ ØªØ§ Ø¨Ø§ ØªÙ†Ù‡Ø§ ÛŒÙ‡ Ú©Ù„ÛŒÚ© Ú©Ø§Ø± Ø§Ù†Ø¬Ø§Ù… Ø¨Ø´Ù‡ Ùˆ Ù†ÛŒØ§Ø²ÛŒ Ø¨Ù‡ Ú©Ù¾ÛŒ Ù¾ÛŒØ³Øª Ú©Ø±Ø¯Ù† Ø§ÛŒØ¯ÛŒ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ù†Ø¨Ø§Ø´Ù‡


Ø®ÛŒÙ„ÛŒ Ø§ÛŒØ¯Ù‡â€ŒÛŒ Ø®ÙˆØ¨ÛŒ Ø¯Ø§Ø±ÛŒ! Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ Ø¨Ù‡ Ø¬Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú©Ø§Ù…Ù†Ø¯Ù‡Ø§ÛŒ Ø¬Ø¯Ø§Ú¯ÙˆÙ†Ù‡ Ù…Ø«Ù„ /approvepoll Ùˆ /rejectpoll Ú©Ù‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù† Ø¢ÛŒØ¯ÛŒ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¯Ø§Ø±Ù†ØŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ "ØªØ£ÛŒÛŒØ¯" (Approve) Ùˆ "Ø±Ø¯" (Reject) Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ Ø²ÛŒØ± Ù¾ÛŒØ§Ù… Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ£ÛŒÛŒØ¯ Ù‚Ø±Ø§Ø± Ø¨Ú¯ÛŒØ±Ù†. Ø§ÛŒÙ†Ø·ÙˆØ±ÛŒ Ù…Ø¯ÛŒØ±Ø§Ù† ÙÙ‚Ø· Ø¨Ø§ ÛŒÙ‡ Ú©Ù„ÛŒÚ© Ù…ÛŒâ€ŒØªÙˆÙ†Ù† Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø±Ùˆ ØªØ£ÛŒÛŒØ¯ ÛŒØ§ Ø±Ø¯ Ú©Ù†Ù† Ùˆ Ù†ÛŒØ§Ø²ÛŒ Ø¨Ù‡ ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø¢ÛŒØ¯ÛŒ Ù†ÛŒØ³Øª. Ø§ÛŒÙ† Ú©Ø§Ø± Ù‡Ù… ØªØ¬Ø±Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø±Ùˆ Ø¨Ù‡ØªØ± Ù…ÛŒâ€ŒÚ©Ù†Ù‡ Ùˆ Ù‡Ù… Ø³Ø±Ø¹Øª Ø¹Ù…Ù„ Ù…Ø¯ÛŒØ±Ø§Ù† Ø±Ùˆ Ø¨Ø§Ù„Ø§ Ù…ÛŒâ€ŒØ¨Ø±Ù‡. ğŸš€

Ø§Ø² Ø§ÙˆÙ†Ø¬Ø§ÛŒÛŒ Ú©Ù‡ Ù‚Ø¨Ù„Ø§Ù‹ ØªÙˆÛŒ Ú©Ø¯ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ø±Ùˆ Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù‡ Ø¨ÙˆØ¯ÛŒÙ…ØŒ Ø§Ù„Ø§Ù† ÙÙ‚Ø· Ø¨Ø§ÛŒØ¯ Ú©Ø§Ù…Ù†Ø¯Ù‡Ø§ÛŒ /approvepoll Ùˆ /rejectpoll Ø±Ùˆ Ø­Ø°Ù Ú©Ù†ÛŒÙ… Ùˆ Ù…Ø·Ù…Ø¦Ù† Ø¨Ø´ÛŒÙ… Ú©Ù‡ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù†. Ù‡Ù…Ú†Ù†ÛŒÙ† Ø¨Ø§ÛŒØ¯ ÛŒÙ‡ Ø³Ø±ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø¨Ø¯ÛŒÙ… ØªØ§ Ù‡Ù…Ù‡â€ŒÚ†ÛŒØ² Ø±ÙˆØ§Ù†â€ŒØªØ± Ø¨Ø´Ù‡.

ğŸ“‹ ØªØºÛŒÛŒØ±Ø§Øª Ù„Ø§Ø²Ù…
1. Ø­Ø°Ù Ú©Ø§Ù…Ù†Ø¯Ù‡Ø§ÛŒ /approvepoll Ùˆ /rejectpoll
Ø§ÛŒÙ† Ø¯Ùˆ Ú©Ø§Ù…Ù†Ø¯ Ø±Ùˆ Ø§Ø² Ù„ÛŒØ³Øª commands Ø­Ø°Ù Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ….
Ù…Ù†Ø·Ù‚ ØªØ£ÛŒÛŒØ¯ Ùˆ Ø±Ø¯ Ø±Ùˆ Ú©Ø§Ù…Ù„Ø§Ù‹ Ø¨Ù‡ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ù…Ù†ØªÙ‚Ù„ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ….
2. Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ø±Ùˆ ØªÙˆÛŒ Ù¾ÛŒØ§Ù… Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ£ÛŒÛŒØ¯ Ø¯Ø§Ø±ÛŒÙ…ØŒ Ø§Ù…Ø§ Ø¨Ø§ÛŒØ¯ Ù…Ø·Ù…Ø¦Ù† Ø¨Ø´ÛŒÙ… Ú©Ù‡ ÙÙ‚Ø· Ù…Ø¯ÛŒØ±Ø§Ù† (Ú©Ø³Ø§ÛŒÛŒ Ú©Ù‡ Ø±ÙˆÙ„ moderatorRole Ø±Ùˆ Ø¯Ø§Ø±Ù†) Ø¨ØªÙˆÙ†Ù† Ø§Ø²Ø´ÙˆÙ† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ù†.
Ø¨Ø¹Ø¯ Ø§Ø² Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ØŒ Ù¾ÛŒØ§Ù… Ø§ØµÙ„ÛŒ (Pending Poll) Ø¨Ø§ÛŒØ¯ Ø¢Ù¾Ø¯ÛŒØª Ø¨Ø´Ù‡ Ùˆ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨Ø´Ù†.
3. Ø¨Ù‡Ø¨ÙˆØ¯ ØªØ¬Ø±Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ
ÛŒÙ‡ Ù¾ÛŒØ§Ù… ØªØ£ÛŒÛŒØ¯ ÛŒØ§ Ø±Ø¯ Ø¨Ù‡ Ù…Ø¯ÛŒØ± Ù†Ø´ÙˆÙ† Ø¨Ø¯ÛŒÙ… Ú©Ù‡ Ø¨ÙÙ‡Ù…Ù‡ Ø¹Ù…Ù„ÛŒØ§ØªØ´ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡.
Ø§Ú¯Ù‡ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ ØªØ£ÛŒÛŒØ¯ Ø¨Ø´Ù‡ØŒ Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ ØªÙˆÛŒ Ú©Ø§Ù†Ø§Ù„ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ù…Ù†ØªØ´Ø± Ø¨Ø´Ù‡.
ğŸ“¦ ØªØºÛŒÛŒØ±Ø§Øª Ø¯Ø± Ú©Ø¯
1. Ø­Ø°Ù /approvepoll Ùˆ /rejectpoll Ø§Ø² Ù„ÛŒØ³Øª Ú©Ø§Ù…Ù†Ø¯Ù‡Ø§
ØªÙˆÛŒ Ø¢Ø±Ø§ÛŒÙ‡ commandsØŒ Ø§ÛŒÙ† Ø¯Ùˆ Ú©Ø§Ù…Ù†Ø¯ Ø±Ùˆ Ø­Ø°Ù Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…:

javascript

Collapse

Wrap

Copy
const commands = [
  new SlashCommandBuilder()
    .setName('ping')
    .setDescription('Ù†Ù…Ø§ÛŒØ´ ÙˆØ¶Ø¹ÛŒØª Ø±Ø¨Ø§Øª ğŸ“'),
  new SlashCommandBuilder()
    .setName('setpollchannel')
    .setDescription('ØªÙ†Ø¸ÛŒÙ… Ú©Ø§Ù†Ø§Ù„ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ ğŸ“')
    .setDefaultMemberPermissions(PermissionsBitField.Flags.ManageChannels),
  new SlashCommandBuilder()
    .setName('setmoderatorrole')
    .setDescription('ØªÙ†Ø¸ÛŒÙ… Ø±ÙˆÙ„ ØªØ£ÛŒÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡ ğŸ›¡ï¸')
    .setDefaultMemberPermissions(PermissionsBitField.Flags.ManageRoles)
    .addRoleOption(option =>
      option.setName('role')
        .setDescription('Ø±ÙˆÙ„ ØªØ£ÛŒÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡')
        .setRequired(true)),
  new SlashCommandBuilder()
    .setName('createpoll')
    .setDescription('Ø³Ø§Ø®Øª Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¬Ø¯ÛŒØ¯ ğŸ“')
    .addStringOption(option =>
      option.setName('question')
        .setDescription('Ø³ÙˆØ§Ù„ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ')
        .setRequired(true)
        .setMaxLength(256))
    .addStringOption(option =>
      option.setName('options')
        .setDescription('Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ (Ø¨Ø§ | Ø¬Ø¯Ø§ Ú©Ù†ÛŒØ¯)')
        .setRequired(true))
    .addIntegerOption(option =>
      option.setName('duration')
        .setDescription('Ù…Ø¯Øª Ø²Ù…Ø§Ù† (Ø³Ø§Ø¹Øª)')
        .setMinValue(1)
        .setMaxValue(168))
    .addBooleanOption(option =>
      option.setName('anonymous')
        .setDescription('Ø­Ø§Ù„Øª Ù†Ø§Ø´Ù†Ø§Ø³')
        .setRequired(false))
];
2. Ø­Ø°Ù Ù…Ù†Ø·Ù‚ /approvepoll Ùˆ /rejectpoll Ø§Ø² interactionCreate
ØªÙˆÛŒ Ø¨Ø®Ø´ interactionCreateØŒ caseÙ‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø§ÛŒÙ† Ø¯Ùˆ Ú©Ø§Ù…Ù†Ø¯ Ø±Ùˆ Ø­Ø°Ù Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…. Ù…Ù†Ø·Ù‚ ØªØ£ÛŒÛŒØ¯ Ùˆ Ø±Ø¯ Ù‚Ø¨Ù„Ø§Ù‹ ØªÙˆÛŒ Ø¨Ø®Ø´ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ (interaction.isButton()) Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡ØŒ Ù¾Ø³ ÙÙ‚Ø· Ø¨Ø§ÛŒØ¯ Ù…Ø·Ù…Ø¦Ù† Ø¨Ø´ÛŒÙ… Ú©Ù‡ Ø§ÙˆÙ† Ø¨Ø®Ø´ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù‡.

3. Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
ØªÙˆÛŒ /createpollØŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ø±Ùˆ Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯ÛŒÙ…. Ø­Ø§Ù„Ø§ Ø¨Ø§ÛŒØ¯ Ù…Ø·Ù…Ø¦Ù† Ø¨Ø´ÛŒÙ… Ú©Ù‡ Ø¨Ø¹Ø¯ Ø§Ø² Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ØŒ Ù¾ÛŒØ§Ù… Ø§ØµÙ„ÛŒ Ø¢Ù¾Ø¯ÛŒØª Ø¨Ø´Ù‡ Ùˆ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨Ø´Ù†.
ÛŒÙ‡ Ù¾ÛŒØ§Ù… ØªØ£ÛŒÛŒØ¯ Ø¨Ù‡ Ù…Ø¯ÛŒØ± Ù†Ø´ÙˆÙ† Ø¨Ø¯ÛŒÙ….
Ø¨Ø®Ø´ /createpoll (Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§):
Ø§ÛŒÙ† Ø¨Ø®Ø´ Ù‚Ø¨Ù„Ø§Ù‹ Ø¯Ø±Ø³Øª Ø¨ÙˆØ¯ØŒ ÙÙ‚Ø· ÛŒÙ‡ Ù…Ù‚Ø¯Ø§Ø± Ø¸Ø§Ù‡Ø± Ù¾ÛŒØ§Ù… Ø±Ùˆ Ø¨Ù‡ØªØ± Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…:

javascript

Collapse

Wrap

Copy
case 'createpoll':
  if (!config.pollChannel || !config.moderatorRole) {
    await interaction.editReply({ content: `${EMOJIS.ERROR} **Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ Ú©Ø§Ù†Ø§Ù„ Ùˆ Ø±ÙˆÙ„ Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯**` });
    return;
  }

  const pollId = Date.now().toString();
  const poll = {
    question: interaction.options.getString('question'),
    options: interaction.options.getString('options').split('|').map(o => o.trim()),
    duration: (interaction.options.getInteger('duration') || 24) * 3600000,
    creator: interaction.user.id,
    creatorName: interaction.user.username,
    endTime: Date.now() + ((interaction.options.getInteger('duration') || 24) * 3600000),
    anonymous: interaction.options.getBoolean('anonymous') || false,
    voters: new Map()
  };

  if (poll.options.length < 2 || poll.options.length > 5) {
    await interaction.editReply({ content: `${EMOJIS.ERROR} **Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¨Ø§ÛŒØ¯ Ø¨ÛŒÙ† 2 ØªØ§ 5 Ú¯Ø²ÛŒÙ†Ù‡ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯**` });
    return;
  }

  config.pendingPolls.set(pollId, poll);

  const embed = new EmbedBuilder()
    .setTitle(`${poll.anonymous ? 'ğŸ”’ ' : ''}ğŸ“Š Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ£ÛŒÛŒØ¯`)
    .setColor(COLORS.PENDING)
    .setDescription('Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ† Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ùˆ ØªØ£ÛŒÛŒØ¯ ÛŒØ§ Ø±Ø¯ Ú©Ù†ÛŒØ¯! ğŸš¨')
    .addFields(
      { name: `${EMOJIS.QUESTION} **Ø³ÙˆØ§Ù„**`, value: poll.question, inline: false },
      { name: `${EMOJIS.OPTIONS} **Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§**`, value: poll.options.map((opt, i) => `${reactionEmojis[i]} ${opt}`).join('\n'), inline: false },
      { name: `${EMOJIS.DURATION} **Ù…Ø¯Øª Ø²Ù…Ø§Ù†**`, value: `${poll.duration / 3600000} Ø³Ø§Ø¹Øª`, inline: true },
      { name: `${EMOJIS.ANONYMOUS} **Ù†Ø§Ø´Ù†Ø§Ø³**`, value: poll.anonymous ? 'Ø¨Ù„Ù‡ âœ…' : 'Ø®ÛŒØ± âŒ', inline: true },
      { name: `${EMOJIS.ID} **Ø´Ù†Ø§Ø³Ù‡**`, value: pollId, inline: true }
    )
    .setThumbnail(client.user.displayAvatarURL())
    .setFooter({ text: poll.anonymous ? 'Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ù†Ø§Ø´Ù†Ø§Ø³ ğŸ”’ | Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ£ÛŒÛŒØ¯' : `Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· ${poll.creatorName} | Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ£ÛŒÛŒØ¯` })
    .setTimestamp();

  const actionRow = new ActionRowBuilder()
    .addComponents(
      new ButtonBuilder()
        .setCustomId(`approve_${pollId}`)
        .setLabel('ØªØ£ÛŒÛŒØ¯')
        .setStyle(ButtonStyle.Success)
        .setEmoji('âœ…'),
      new ButtonBuilder()
        .setCustomId(`reject_${pollId}`)
        .setLabel('Ø±Ø¯')
        .setStyle(ButtonStyle.Danger)
        .setEmoji('âŒ')
    );

  await interaction.editReply({ content: `${EMOJIS.SUCCESS} **Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø´Ù…Ø§ Ø§ÛŒØ¬Ø§Ø¯ Ùˆ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ£ÛŒÛŒØ¯ Ø§Ø³Øª**` });
  const message = await interaction.channel.send({ 
    content: `<@&${config.moderatorRole}> ÛŒÚ© Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¬Ø¯ÛŒØ¯ Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªØ£ÛŒÛŒØ¯ Ø¯Ø§Ø±Ø¯! ğŸš¨`,
    embeds: [embed],
    components: [actionRow]
  });

  for (const emoji of reactionEmojis.slice(0, poll.options.length)) {
    await message.react(emoji);
  }
  break;
Ø¨Ø®Ø´ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ (interaction.isButton()):
Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø±Ùˆ Ø¨Ù‡ÛŒÙ†Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… ØªØ§ Ø¨Ø¹Ø¯ Ø§Ø² Ú©Ù„ÛŒÚ©ØŒ Ù¾ÛŒØ§Ù… Ø¢Ù¾Ø¯ÛŒØª Ø¨Ø´Ù‡ Ùˆ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨Ø´Ù†:

javascript

Collapse

Wrap

Copy
} else if (interaction.isButton()) {
  if (!interaction.member.roles.cache.has(config.moderatorRole)) {
    await interaction.reply({ content: `${EMOJIS.ERROR} **Ø´Ù…Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ù„Ø§Ø²Ù… Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ú©Ø§Ø± Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯**`, ephemeral: true });
    return;
  }

  const [action, pollId] = interaction.customId.split('_');
  const poll = config.pendingPolls.get(pollId);
  if (!poll) {
    await interaction.update({ 
      content: `${EMOJIS.ERROR} **Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± ÛŒØ§ÙØª Ù†Ø´Ø¯**`, 
      embeds: [], 
      components: [] 
    });
    return;
  }

  if (action === 'approve') {
    const channel = await client.channels.fetch(config.pollChannel);
    const pollEmbed = new EmbedBuilder()
      .setTitle(`${poll.anonymous ? 'ğŸ”’ ' : ''}ğŸ“Š Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ ÙØ¹Ø§Ù„`)
      .setColor(COLORS.ACTIVE)
      .addFields(
        { name: `${EMOJIS.QUESTION} **Ø³ÙˆØ§Ù„**`, value: poll.question, inline: false },
        { name: `${EMOJIS.OPTIONS} **Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§**`, value: poll.options.map((opt, i) => `${reactionEmojis[i]} ${opt}`).join('\n'), inline: false },
        { name: `${EMOJIS.TIME_REMAINING} **Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒÙ…Ø§Ù†Ø¯Ù‡**`, value: `<t:${Math.floor(poll.endTime / 1000)}:R>`, inline: true },
        { name: `${EMOJIS.ANONYMOUS} **Ù†Ø§Ø´Ù†Ø§Ø³**`, value: poll.anonymous ? 'Ø¨Ù„Ù‡ âœ…' : 'Ø®ÛŒØ± âŒ', inline: true }
      )
      .setThumbnail(client.user.displayAvatarURL())
      .setFooter({ text: poll.anonymous ? 'Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ù†Ø§Ø´Ù†Ø§Ø³ ğŸ”’ | ÙØ¹Ø§Ù„' : `Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· ${poll.creatorName} | ÙØ¹Ø§Ù„` })
      .setTimestamp();

    const msg = await channel.send({ embeds: [pollEmbed] });
    for (const emoji of reactionEmojis.slice(0, poll.options.length)) {
      await msg.react(emoji);
    }

    config.activePolls.set(msg.id, poll);
    config.pendingPolls.delete(pollId);
    await saveSettings();

    const updatedEmbed = new EmbedBuilder()
      .setTitle('âœ… Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ ØªØ£ÛŒÛŒØ¯ Ø´Ø¯')
      .setColor(COLORS.SUCCESS)
      .setDescription(`Ø§ÛŒÙ† Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ ØªÙˆØ³Ø· <@${interaction.user.id}> ØªØ£ÛŒÛŒØ¯ Ø´Ø¯ Ùˆ Ø¯Ø± <#${config.pollChannel}> Ù…Ù†ØªØ´Ø± Ø´Ø¯.`)
      .setTimestamp();

    await interaction.update({ 
      content: null, 
      embeds: [updatedEmbed], 
      components: [] 
    });
  } else if (action === 'reject') {
    config.pendingPolls.delete(pollId);
    const updatedEmbed = new EmbedBuilder()
      .setTitle('âŒ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø±Ø¯ Ø´Ø¯')
      .setColor(COLORS.ERROR)
      .setDescription(`Ø§ÛŒÙ† Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ ØªÙˆØ³Ø· <@${interaction.user.id}> Ø±Ø¯ Ø´Ø¯.`)
      .setTimestamp();

    await interaction.update({ 
      content: null, 
      embeds: [updatedEmbed], 
      components: [] 
    });
  }
}
ğŸ“¦ Ú©Ø¯ Ù†Ù‡Ø§ÛŒÛŒ Ø§ØµÙ„Ø§Ø­â€ŒØ´Ø¯Ù‡
javascript

Collapse

Wrap

Copy
const { Client, GatewayIntentBits, SlashCommandBuilder, EmbedBuilder, PermissionsBitField, REST, Routes, InteractionResponseFlags, ActionRowBuilder, ButtonBuilder, ButtonStyle } = require('discord.js');
const { QuickDB } = require('quick.db');
require('dotenv').config();

const db = new QuickDB();
const client = new Client({
  intents: [
    GatewayIntentBits.Guilds,
    GatewayIntentBits.GuildMessages,
    GatewayIntentBits.MessageContent,
    GatewayIntentBits.GuildMessageReactions,
    GatewayIntentBits.GuildMembers
  ]
});

const COLORS = {
  SUCCESS: 0x00FF00,
  ERROR: 0xFF0000,
  PENDING: 0xFFA500,
  ACTIVE: 0x1E90FF,
  PING: 0x32CD32
};

const EMOJIS = {
  SUCCESS: 'âœ…',
  ERROR: 'âŒ',
  QUESTION: 'â“',
  OPTIONS: 'ğŸ“‹',
  DURATION: 'â±ï¸',
  ID: 'ğŸ”‘',
  ANONYMOUS: 'ğŸ”’',
  TIME_REMAINING: 'â³',
  TOTAL_VOTES: 'ğŸ“Š'
};

const config = {
  token: process.env.TOKEN,
  clientId: process.env.CLIENT_ID,
  pollChannel: null,
  moderatorRole: null,
  pendingPolls: new Map(),
  activePolls: new Map()
};

if (!config.token || !config.clientId) {
  console.error('Error: Missing environment variables!');
  process.exit(1);
}

async function initSettings() {
  try {
    const settings = await db.get('settings') || {};
    config.pollChannel = settings.pollChannel || null;
    config.moderatorRole = settings.moderatorRole || null;
    const activePollsData = settings.activePolls || [];
    config.activePolls = new Map(activePollsData.map(([key, value]) => {
      return [key, { ...value, voters: new Map(value.voters || []) }];
    }));
    console.log('Settings loaded successfully');
  } catch (error) {
    console.error('Error loading settings:', error);
  }
}

async function saveSettings() {
  try {
    const settings = {
      pollChannel: config.pollChannel,
      moderatorRole: config.moderatorRole,
      activePolls: Array.from(config.activePolls.entries()).map(([key, value]) => {
        return [key, { ...value, voters: Array.from(value.voters.entries()) }];
      })
    };
    await db.set('settings', settings);
    return true;
  } catch (error) {
    console.error('Error saving settings:', error);
    return false;
  }
}

const reactionEmojis = ['1ï¸âƒ£', '2ï¸âƒ£', '3ï¸âƒ£', '4ï¸âƒ£', '5ï¸âƒ£'];

const commands = [
  new SlashCommandBuilder()
    .setName('ping')
    .setDescription('Ù†Ù…Ø§ÛŒØ´ ÙˆØ¶Ø¹ÛŒØª Ø±Ø¨Ø§Øª ğŸ“'),
  new SlashCommandBuilder()
    .setName('setpollchannel')
    .setDescription('ØªÙ†Ø¸ÛŒÙ… Ú©Ø§Ù†Ø§Ù„ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ ğŸ“')
    .setDefaultMemberPermissions(PermissionsBitField.Flags.ManageChannels),
  new SlashCommandBuilder()
    .setName('setmoderatorrole')
    .setDescription('ØªÙ†Ø¸ÛŒÙ… Ø±ÙˆÙ„ ØªØ£ÛŒÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡ ğŸ›¡ï¸')
    .setDefaultMemberPermissions(PermissionsBitField.Flags.ManageRoles)
    .addRoleOption(option =>
      option.setName('role')
        .setDescription('Ø±ÙˆÙ„ ØªØ£ÛŒÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡')
        .setRequired(true)),
  new SlashCommandBuilder()
    .setName('createpoll')
    .setDescription('Ø³Ø§Ø®Øª Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¬Ø¯ÛŒØ¯ ğŸ“')
    .addStringOption(option =>
      option.setName('question')
        .setDescription('Ø³ÙˆØ§Ù„ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ')
        .setRequired(true)
        .setMaxLength(256))
    .addStringOption(option =>
      option.setName('options')
        .setDescription('Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ (Ø¨Ø§ | Ø¬Ø¯Ø§ Ú©Ù†ÛŒØ¯)')
        .setRequired(true))
    .addIntegerOption(option =>
      option.setName('duration')
        .setDescription('Ù…Ø¯Øª Ø²Ù…Ø§Ù† (Ø³Ø§Ø¹Øª)')
        .setMinValue(1)
        .setMaxValue(168))
    .addBooleanOption(option =>
      option.setName('anonymous')
        .setDescription('Ø­Ø§Ù„Øª Ù†Ø§Ø´Ù†Ø§Ø³')
        .setRequired(false))
];

async function registerCommands() {
  try {
    const rest = new REST({ version: '10' }).setToken(config.token);
    await rest.put(Routes.applicationCommands(config.clientId), { body: commands });
    console.log('Commands registered successfully');
  } catch (error) {
    console.error('Error registering commands:', error);
  }
}

function startPollChecker() {
  setInterval(async () => {
    for (const [messageId, poll] of config.activePolls.entries()) {
      try {
        if (Date.now() >= poll.endTime) {
          await endPoll(messageId);
        } else {
          const channel = await client.channels.fetch(config.pollChannel);
          const message = await channel.messages.fetch(messageId);
          const embed = message.embeds[0];
          
          const updatedEmbed = new EmbedBuilder(embed.data)
            .spliceFields(2, 1, { 
              name: `${EMOJIS.TIME_REMAINING} **Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒÙ…Ø§Ù†Ø¯Ù‡**`, 
              value: `<t:${Math.floor(poll.endTime / 1000)}:R>`, 
              inline: true 
            });
          
          await message.edit({ embeds: [updatedEmbed] });
        }
      } catch (error) {
        console.error('Error updating poll:', error);
      }
    }
  }, 60000);
}

async function endPoll(messageId) {
  const poll = config.activePolls.get(messageId);
  if (!poll) return;

  try {
    const channel = await client.channels.fetch(config.pollChannel);
    const message = await channel.messages.fetch(messageId);
    const reactions = message.reactions.cache;

    const results = poll.options.map((opt, i) => {
      const reaction = reactions.get(reactionEmojis[i]);
      const count = reaction ? reaction.count - 1 : 0;
      return { option: opt, count };
    });

    const totalVotes = results.reduce((sum, r) => sum + r.count, 0);
    const maxVotes = Math.max(...results.map(r => r.count), 1);

    const embed = new EmbedBuilder()
      .setColor(COLORS.ERROR)
      .setTitle('ğŸ“Š Ù†ØªØ§ÛŒØ¬ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ')
      .addFields(
        { name: `${EMOJIS.QUESTION} **Ø³ÙˆØ§Ù„**`, value: poll.question, inline: false },
        { name: `${EMOJIS.OPTIONS} **Ù†ØªØ§ÛŒØ¬**`, value: results.map((r, i) => {
          const percentage = totalVotes > 0 ? (r.count / totalVotes) * 100 : 0;
          const barLength = Math.round((r.count / maxVotes) * 10);
          const bar = 'â–ˆ'.repeat(barLength) + 'â–'.repeat(10 - barLength);
          return `${reactionEmojis[i]} ${r.option}: **${r.count} Ø±Ø£ÛŒ** (${percentage.toFixed(1)}%)\n${bar}`;
        }).join('\n\n'), inline: false },
        { name: `${EMOJIS.TOTAL_VOTES} **Ù…Ø¬Ù…ÙˆØ¹ Ø¢Ø±Ø§**`, value: `${totalVotes}`, inline: true },
        { name: `${EMOJIS.ANONYMOUS} **Ù†Ø§Ø´Ù†Ø§Ø³**`, value: poll.anonymous ? 'Ø¨Ù„Ù‡ âœ…' : 'Ø®ÛŒØ± âŒ', inline: true }
      )
      .setThumbnail(client.user.displayAvatarURL())
      .setFooter({ text: poll.anonymous ? 'Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ù†Ø§Ø´Ù†Ø§Ø³ ğŸ”’ | Ù¾Ø§ÛŒØ§Ù† ÛŒØ§ÙØª!' : `Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· ${poll.creatorName} | Ù¾Ø§ÛŒØ§Ù† ÛŒØ§ÙØª!` })
      .setTimestamp();

    await channel.send({ embeds: [embed] });
    config.activePolls.delete(messageId);
    await saveSettings();
  } catch (error) {
    console.error('Error in endPoll:', error);
  }
}

client.once('ready', () => {
  console.log(`Bot logged in as ${client.user.tag}`);
  initSettings().then(() => {
    registerCommands();
    startPollChecker();
  });
});

client.on('interactionCreate', async interaction => {
  if (!interaction.isCommand() && !interaction.isButton()) return;

  if (interaction.isCommand()) {
    await interaction.deferReply({ ephemeral: true });

    try {
      switch (interaction.commandName) {
        case 'ping':
          const botPing = client.ws.ping;
          const pingEmbed = new EmbedBuilder()
            .setTitle('ğŸ“ Ù¾ÙˆÙ†Ú¯!')
            .setColor(COLORS.PING)
            .setDescription('ÙˆØ¶Ø¹ÛŒØª Ø§ØªØµØ§Ù„ Ø±Ø¨Ø§Øª Ø±Ùˆ Ú†Ú© Ú©Ù†! ğŸš€')
            .addFields(
              { name: 'ğŸ“¡ **Ù¾ÛŒÙ†Ú¯ Ø±Ø¨Ø§Øª**', value: `${botPing}ms`, inline: true }
            )
            .setThumbnail(client.user.displayAvatarURL())
            .setFooter({ text: `Ø¯Ø±Ø®ÙˆØ§Ø³Øª ØªÙˆØ³Ø· ${interaction.user.tag} | ÙˆØ¶Ø¹ÛŒØª: ğŸŸ¢ Ø¢Ù†Ù„Ø§ÛŒÙ†` })
            .setTimestamp();
          await interaction.editReply({ embeds: [pingEmbed], ephemeral: false });
          break;

        case 'setpollchannel':
          config.pollChannel = interaction.channelId;
          if (await saveSettings()) {
            await interaction.editReply({ content: `${EMOJIS.SUCCESS} **Ú©Ø§Ù†Ø§Ù„ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯** | <#${config.pollChannel}>` });
          } else {
            await interaction.editReply({ content: `${EMOJIS.ERROR} **Ø®Ø·Ø§ Ø¯Ø± ØªÙ†Ø¸ÛŒÙ… Ú©Ø§Ù†Ø§Ù„**` });
          }
          break;

        case 'setmoderatorrole':
          config.moderatorRole = interaction.options.getRole('role').id;
          if (await saveSettings()) {
            await interaction.editReply({ content: `${EMOJIS.SUCCESS} **Ø±ÙˆÙ„ ØªØ£ÛŒÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡ ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯** | <@&${config.moderatorRole}>` });
          } else {
            await interaction.editReply({ content: `${EMOJIS.ERROR} **Ø®Ø·Ø§ Ø¯Ø± ØªÙ†Ø¸ÛŒÙ… Ø±ÙˆÙ„**` });
          }
          break;

        case 'createpoll':
          if (!config.pollChannel || !config.moderatorRole) {
            await interaction.editReply({ content: `${EMOJIS.ERROR} **Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ Ú©Ø§Ù†Ø§Ù„ Ùˆ Ø±ÙˆÙ„ Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯**` });
            return;
          }

          const pollId = Date.now().toString();
          const poll = {
            question: interaction.options.getString('question'),
            options: interaction.options.getString('options').split('|').map(o => o.trim()),
            duration: (interaction.options.getInteger('duration') || 24) * 3600000,
            creator: interaction.user.id,
            creatorName: interaction.user.username,
            endTime: Date.now() + ((interaction.options.getInteger('duration') || 24) * 3600000),
            anonymous: interaction.options.getBoolean('anonymous') || false,
            voters: new Map()
          };

          if (poll.options.length < 2 || poll.options.length > 5) {
            await interaction.editReply({ content: `${EMOJIS.ERROR} **Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¨Ø§ÛŒØ¯ Ø¨ÛŒÙ† 2 ØªØ§ 5 Ú¯Ø²ÛŒÙ†Ù‡ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯**` });
            return;
          }

          config.pendingPolls.set(pollId, poll);

          const embed = new EmbedBuilder()
            .setTitle(`${poll.anonymous ? 'ğŸ”’ ' : ''}ğŸ“Š Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ£ÛŒÛŒØ¯`)
            .setColor(COLORS.PENDING)
            .setDescription('Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ† Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ùˆ ØªØ£ÛŒÛŒØ¯ ÛŒØ§ Ø±Ø¯ Ú©Ù†ÛŒØ¯! ğŸš¨')
            .addFields(
              { name: `${EMOJIS.QUESTION} **Ø³ÙˆØ§Ù„**`, value: poll.question, inline: false },
              { name: `${EMOJIS.OPTIONS} **Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§**`, value: poll.options.map((opt, i) => `${reactionEmojis[i]} ${opt}`).join('\n'), inline: false },
              { name: `${EMOJIS.DURATION} **Ù…Ø¯Øª Ø²Ù…Ø§Ù†**`, value: `${poll.duration / 3600000} Ø³Ø§Ø¹Øª`, inline: true },
              { name: `${EMOJIS.ANONYMOUS} **Ù†Ø§Ø´Ù†Ø§Ø³**`, value: poll.anonymous ? 'Ø¨Ù„Ù‡ âœ…' : 'Ø®ÛŒØ± âŒ', inline: true },
              { name: `${EMOJIS.ID} **Ø´Ù†Ø§Ø³Ù‡**`, value: pollId, inline: true }
            )
            .setThumbnail(client.user.displayAvatarURL())
            .setFooter({ text: poll.anonymous ? 'Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ù†Ø§Ø´Ù†Ø§Ø³ ğŸ”’ | Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ£ÛŒÛŒØ¯' : `Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· ${poll.creatorName} | Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ£ÛŒÛŒØ¯` })
            .setTimestamp();

          const actionRow = new ActionRowBuilder()
            .addComponents(
              new ButtonBuilder()
                .setCustomId(`approve_${pollId}`)
                .setLabel('ØªØ£ÛŒÛŒØ¯')
                .setStyle(ButtonStyle.Success)
                .setEmoji('âœ…'),
              new ButtonBuilder()
                .setCustomId(`reject_${pollId}`)
                .setLabel('Ø±Ø¯')
                .setStyle(ButtonStyle.Danger)
                .setEmoji('âŒ')
            );

          await interaction.editReply({ content: `${EMOJIS.SUCCESS} **Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø´Ù…Ø§ Ø§ÛŒØ¬Ø§Ø¯ Ùˆ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ£ÛŒÛŒØ¯ Ø§Ø³Øª**` });
          const message = await interaction.channel.send({ 
            content: `<@&${config.moderatorRole}> ÛŒÚ© Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¬Ø¯ÛŒØ¯ Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªØ£ÛŒÛŒØ¯ Ø¯Ø§Ø±Ø¯! ğŸš¨`,
            embeds: [embed],
            components: [actionRow]
          });

          for (const emoji of reactionEmojis.slice(0, poll.options.length)) {
            await message.react(emoji);
          }
          break;
      }
    } catch (error) {
      console.error('Error in command:', error);
      await interaction.editReply({ content: `${EMOJIS.ERROR} **Ø®Ø·Ø§ÛŒÛŒ Ø±Ø® Ø¯Ø§Ø¯**` }).catch(console.error);
    }
  } else if (interaction.isButton()) {
    if (!interaction.member.roles.cache.has(config.moderatorRole)) {
      await interaction.reply({ content: `${EMOJIS.ERROR} **Ø´Ù…Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ù„Ø§Ø²Ù… Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ú©Ø§Ø± Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯**`, ephemeral: true });
      return;
    }

    const [action, pollId] = interaction.customId.split('_');
    const poll = config.pendingPolls.get(pollId);
    if (!poll) {
      await interaction.update({ 
        content: `${EMOJIS.ERROR} **Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± ÛŒØ§ÙØª Ù†Ø´Ø¯**`, 
        embeds: [], 
        components: [] 
      });
      return;
    }

    if (action === 'approve') {
      const channel = await client.channels.fetch(config.pollChannel);
      const pollEmbed = new EmbedBuilder()
        .setTitle(`${poll.anonymous ? 'ğŸ”’ ' : ''}ğŸ“Š Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ ÙØ¹Ø§Ù„`)
        .setColor(COLORS.ACTIVE)
        .addFields(
          { name: `${EMOJIS.QUESTION} **Ø³ÙˆØ§Ù„**`, value: poll.question, inline: false },
          { name: `${EMOJIS.OPTIONS} **Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§**`, value: poll.options.map((opt, i) => `${reactionEmojis[i]} ${opt}`).join('\n'), inline: false },
          { name: `${EMOJIS.TIME_REMAINING} **Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒÙ…Ø§Ù†Ø¯Ù‡**`, value: `<t:${Math.floor(poll.endTime / 1000)}:R>`, inline: true },
          { name: `${EMOJIS.ANONYMOUS} **Ù†Ø§Ø´Ù†Ø§Ø³**`, value: poll.anonymous ? 'Ø¨Ù„Ù‡ âœ…' : 'Ø®ÛŒØ± âŒ', inline: true }
        )
        .setThumbnail(client.user.displayAvatarURL())
        .setFooter({ text: poll.anonymous ? 'Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ù†Ø§Ø´Ù†Ø§Ø³ ğŸ”’ | ÙØ¹Ø§Ù„' : `Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· ${poll.creatorName} | ÙØ¹Ø§Ù„` })
        .setTimestamp();

      const msg = await channel.send({ embeds: [pollEmbed] });
      for (const emoji of reactionEmojis.slice(0, poll.options.length)) {
        await msg.react(emoji);
      }

      config.activePolls.set(msg.id, poll);
      config.pendingPolls.delete(pollId);
      await saveSettings();

      const updatedEmbed = new EmbedBuilder()
        .setTitle('âœ… Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ ØªØ£ÛŒÛŒØ¯ Ø´Ø¯')
        .setColor(COLORS.SUCCESS)
        .setDescription(`Ø§ÛŒÙ† Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ ØªÙˆØ³Ø· <@${interaction.user.id}> ØªØ£ÛŒÛŒØ¯ Ø´Ø¯ Ùˆ Ø¯Ø± <#${config.pollChannel}> Ù…Ù†ØªØ´Ø± Ø´Ø¯.`)
        .setTimestamp();

      await interaction.update({ 
        content: null, 
        embeds: [updatedEmbed], 
        components: [] 
      });
    } else if (action === 'reject') {
      config.pendingPolls.delete(pollId);
      const updatedEmbed = new EmbedBuilder()
        .setTitle('âŒ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø±Ø¯ Ø´Ø¯')
        .setColor(COLORS.ERROR)
        .setDescription(`Ø§ÛŒÙ† Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ ØªÙˆØ³Ø· <@${interaction.user.id}> Ø±Ø¯ Ø´Ø¯.`)
        .setTimestamp();

      await interaction.update({ 
        content: null, 
        embeds: [updatedEmbed], 
        components: [] 
      });
    }
  }
});

client.on('messageReactionAdd', async (reaction, user) => {
  if (user.bot) return;

  const poll = config.activePolls.get(reaction.message.id);
  if (!poll) return;

  const emoji = reaction.emoji.name;
  const validIndex = reactionEmojis.indexOf(emoji);

  if (validIndex === -1 || validIndex >= poll.options.length) {
    await reaction.users.remove(user);
    return;
  }

  if (poll.voters.has(user.id)) {
    await reaction.users.remove(user);
    await reaction.message.channel.send({ content: `<@${user.id}> ${EMOJIS.ERROR} **Ø´Ù…Ø§ Ù‚Ø¨Ù„Ø§Ù‹ Ø±Ø£ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒØ¯**` });
    return;
  }

  poll.voters.set(user.id, validIndex);
});

client.on('messageReactionRemove', async (reaction, user) => {
  if (user.bot) return;

  const poll = config.activePolls.get(reaction.message.id);
  if (!poll) return;

  const emoji = reaction.emoji.name;
  const validIndex = reactionEmojis.indexOf(emoji);

  if (validIndex === -1 || validIndex >= poll.options.length) return;

  if (poll.voters.get(user.id) === validIndex) {
    poll.voters.delete(user.id);
  }
});

client.login(config.token).catch(console.error);
ğŸš€ Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ
Ø¨Ø§ Ø§ÛŒÙ† ØªØºÛŒÛŒØ±Ø§Øª:

Ú©Ø§Ù…Ù†Ø¯Ù‡Ø§ÛŒ /approvepoll Ùˆ /rejectpoll Ø­Ø°Ù Ø´Ø¯Ù†.
Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ "ØªØ£ÛŒÛŒØ¯" Ùˆ "Ø±Ø¯" Ø²ÛŒØ± Ù¾ÛŒØ§Ù… Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ£ÛŒÛŒØ¯ Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±Ù† Ùˆ Ù…Ø¯ÛŒØ±Ø§Ù† Ù…ÛŒâ€ŒØªÙˆÙ†Ù† Ø¨Ø§ ÛŒÙ‡ Ú©Ù„ÛŒÚ© Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø±Ùˆ ØªØ£ÛŒÛŒØ¯ ÛŒØ§ Ø±Ø¯ Ú©Ù†Ù†.
Ø¨Ø¹Ø¯ Ø§Ø² Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡:
Ø§Ú¯Ù‡ ØªØ£ÛŒÛŒØ¯ Ø¨Ø´Ù‡ØŒ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ ØªÙˆÛŒ Ú©Ø§Ù†Ø§Ù„ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ù…Ù†ØªØ´Ø± Ù…ÛŒâ€ŒØ´Ù‡ Ùˆ Ù¾ÛŒØ§Ù… Ø§ØµÙ„ÛŒ Ø¨Ù‡ "Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ ØªØ£ÛŒÛŒØ¯ Ø´Ø¯" Ø¢Ù¾Ø¯ÛŒØª Ù…ÛŒâ€ŒØ´Ù‡.
Ø§Ú¯Ù‡ Ø±Ø¯ Ø¨Ø´Ù‡ØŒ Ù¾ÛŒØ§Ù… Ø§ØµÙ„ÛŒ Ø¨Ù‡ "Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ Ø±Ø¯ Ø´Ø¯" Ø¢Ù¾Ø¯ÛŒØª Ù…ÛŒâ€ŒØ´Ù‡.
Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ ØºÛŒØ±ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒØ´Ù† ØªØ§ Ø§Ø² Ú©Ù„ÛŒÚ© Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø¨Ø´Ù‡.
ÙÙ‚Ø· Ú©Ø³Ø§ÛŒÛŒ Ú©Ù‡ Ø±ÙˆÙ„ moderatorRole Ø±Ùˆ Ø¯Ø§Ø±Ù† Ù…ÛŒâ€ŒØªÙˆÙ†Ù† Ø§Ø² Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ù†.
Ø§ÛŒÙ† Ú©Ø¯ Ø±Ùˆ ØªÙˆÛŒ Replit Ø§Ø¬Ø±Ø§ Ú©Ù†ØŒ Ø¨Ø§ÛŒØ¯ Ù‡Ù…Ù‡â€ŒÚ†ÛŒØ² Ø®ÛŒÙ„ÛŒ Ø±ÙˆØ§Ù† Ùˆ Ú©Ø§Ø±Ø¨Ø±Ù¾Ø³Ù†Ø¯ Ú©Ø§Ø± Ú©Ù†Ù‡. Ø§Ú¯Ù‡ Ø¨Ø§Ø²Ù… Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ ØªØºÛŒÛŒØ± ÛŒØ§ Ù‚Ø§Ø¨Ù„ÛŒØª Ø¬Ø¯ÛŒØ¯ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØŒ Ø¨Ú¯Ùˆ ØªØ§ Ø¨Ø±Ø§Øª Ø¯Ø±Ø³Øª Ú©Ù†Ù…! ğŸ˜Š

Ù…ÙˆÙÙ‚ Ø¨Ø§Ø´ÛŒ! ğŸŒŸ